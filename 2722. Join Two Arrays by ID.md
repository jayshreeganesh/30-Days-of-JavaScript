# Join Two Arrays by ID

## Problem Description

Given two arrays `arr1` and `arr2` containing objects with an `id` field, merge them into a single array based on the following rules:

- Merge objects by their `id` field
- If an `id` exists in only one array, include that object as-is
- If an `id` exists in both arrays, merge their properties with `arr2` values overriding `arr1` values
- Return the result sorted by `id` in ascending order
- The result should contain unique `id` values

## Examples

### Example 1
**Input:**
```javascript
arr1 = [
    {"id": 1, "x": 1},
    {"id": 2, "x": 9}
], 
arr2 = [
    {"id": 3, "x": 5}
]
```

**Output:**
```javascript
[
    {"id": 1, "x": 1},
    {"id": 2, "x": 9},
    {"id": 3, "x": 5}
]
```

### Example 2
**Input:**
```javascript
arr1 = [
    {"id": 1, "x": 2, "y": 3},
    {"id": 2, "x": 3, "y": 6}
], 
arr2 = [
    {"id": 2, "x": 10, "y": 20},
    {"id": 3, "x": 0, "y": 0}
]
```

**Output:**
```javascript
[
    {"id": 1, "x": 2, "y": 3},
    {"id": 2, "x": 10, "y": 20},
    {"id": 3, "x": 0, "y": 0}
]
```

### Example 3
**Input:**
```javascript
arr1 = [
    {"id": 1, "b": {"b": 94}, "v": [4, 3], "y": 48}
]
arr2 = [
    {"id": 1, "b": {"c": 84}, "v": [1, 3]}
]
```

**Output:**
```javascript
[
    {"id": 1, "b": {"c": 84}, "v": [1, 3], "y": 48}
]
```

## Solutions

### JavaScript Solution

```javascript
/**
 * @param {Array} arr1
 * @param {Array} arr2
 * @return {Array}
 */
var join = function(arr1, arr2) {
    const map = new Map();
    
    // Process arr1
    for (const obj of arr1) {
        map.set(obj.id, { ...obj });
    }
    
    // Process arr2 - merge with arr1 objects if they exist
    for (const obj of arr2) {
        if (map.has(obj.id)) {
            // Merge objects, with arr2 properties overriding arr1
            const existingObj = map.get(obj.id);
            map.set(obj.id, { ...existingObj, ...obj });
        } else {
            map.set(obj.id, { ...obj });
        }
    }
    
    // Convert map values to array and sort by id
    return Array.from(map.values()).sort((a, b) => a.id - b.id);
};
```

### TypeScript Solution

```typescript
type JSONValue = null | boolean | number | string | JSONValue[] | { [key: string]: JSONValue };
type ArrayType = { "id": number } & Record<string, JSONValue>;

function join(arr1: ArrayType[], arr2: ArrayType[]): ArrayType[] {
    const map = new Map<number, ArrayType>();
    
    // Process arr1
    for (const obj of arr1) {
        map.set(obj.id, { ...obj });
    }
    
    // Process arr2 - merge with arr1 objects if they exist
    for (const obj of arr2) {
        if (map.has(obj.id)) {
            // Merge objects, with arr2 properties overriding arr1
            const existingObj = map.get(obj.id)!;
            map.set(obj.id, { ...existingObj, ...obj });
        } else {
            map.set(obj.id, { ...obj });
        }
    }
    
    // Convert map values to array and sort by id
    return Array.from(map.values()).sort((a, b) => a.id - b.id);
}
```

## Algorithm Explanation

1. **Use a Map**: Create a Map to store objects keyed by their `id` for efficient O(1) lookups.

2. **Two-Pass Processing**:
   - **First Pass**: Iterate through `arr1` and add all objects to the map
   - **Second Pass**: Iterate through `arr2`:
     - If `id` exists in map, merge the objects (arr2 properties override arr1)
     - If `id` doesn't exist, add the object to the map

3. **Merge Logic**: Use the spread operator `{ ...existingObj, ...obj }` which automatically handles property overriding where arr2 properties take precedence.

4. **Sorting**: Convert the map values to an array and sort by `id` in ascending order.

## Complexity Analysis

- **Time Complexity**: O(n + m) where n and m are the lengths of arr1 and arr2 respectively
- **Space Complexity**: O(n + m) for storing all unique objects in the map

## Key Features

- **Efficient**: Uses Map for O(1) lookups during merging
- **Clean Merge Logic**: Spread operator handles property overriding naturally
- **Maintains Order**: Final result is sorted by id
- **Handles Nested Objects**: Works with complex nested structures as shown in Example 3

## Usage

```javascript
// Test the function
const result = join(arr1, arr2);
console.log(result);
```

The solution efficiently handles all edge cases including duplicate IDs, nested objects, and arrays while maintaining the required merging behavior.
